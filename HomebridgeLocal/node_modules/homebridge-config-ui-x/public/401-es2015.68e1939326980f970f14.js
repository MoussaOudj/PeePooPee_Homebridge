(self.webpackChunkui=self.webpackChunkui||[]).push([[401],{32401:function(e,t,s){"use strict";s.r(t),s.d(t,{SettingsModule:function(){return D}});var i=s(38583),a=s(3679),r=s(95935),n=s(71271),o=s(63423),l=s(17522),c=s(64762),d=s(54395),g=s(28772),u=s(37716),p=s(49344),m=s(79274);let Z=(()=>{class e{constructor(e,t,s,i){this.activeModal=e,this.toastr=t,this.translate=s,this.$api=i}onResetCachedAccessoriesClick(){return this.clicked=!0,this.$api.put("/server/reset-cached-accessories",{}).subscribe(e=>{this.toastr.success(this.translate.instant("reset.toast_clear_cached_accessories_success"),this.translate.instant("toast.title_success")),this.activeModal.close()},e=>{this.toastr.error(this.translate.instant("reset.toast_failed_to_reset"),this.translate.instant("toast.title_error"))})}}return e.\u0275fac=function(t){return new(t||e)(u.Y36(n.Kz),u.Y36(p._W),u.Y36(r.sK),u.Y36(m.s))},e.\u0275cmp=u.Xpm({type:e,selectors:[["app-remove-all-cached-accessories-modal"]],decls:23,vars:8,consts:[[1,"modal-content"],[1,"modal-header"],[1,"modal-title",3,"translate"],["type","button","data-dismiss","modal","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"text-center","primary-text",3,"translate"],[1,"text-center","grey-text",3,"translate"],[3,"translate"],[1,"text-center"],["type","button","data-dismiss","modal",1,"btn","btn-elegant",3,"disabled","translate","click"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn","btn-primary",3,"translate","click"]],template:function(e,t){1&e&&(u.TgZ(0,"div",0),u.TgZ(1,"div",1),u.TgZ(2,"h5",2),u._uU(3,"Clear Cached Accessories"),u.qZA(),u.TgZ(4,"button",3),u.NdJ("click",function(){return t.activeModal.dismiss("Cross click")}),u.TgZ(5,"span",4),u._uU(6,"\xd7"),u.qZA(),u.qZA(),u.qZA(),u.TgZ(7,"div",5),u.TgZ(8,"h3",6),u._uU(9,"Warning"),u.qZA(),u.TgZ(10,"p",7),u._uU(11,"This action is irreversible. Please read carefully before proceeding."),u.qZA(),u.TgZ(12,"ul"),u.TgZ(13,"li",8),u._uU(14," This action will remove all cached accessories from your Homebridge instance. "),u.qZA(),u.TgZ(15,"li",8),u._uU(16," After performing this action some accessories may need to be reconfigured in HomeKit or re-added to your automations. "),u.qZA(),u.qZA(),u.TgZ(17,"div",9),u.TgZ(18,"button",10),u.NdJ("click",function(){return t.onResetCachedAccessoriesClick()}),u._uU(19,"Clear Cached Accessories"),u.qZA(),u.qZA(),u.qZA(),u.TgZ(20,"div",11),u.TgZ(21,"button",12),u.NdJ("click",function(){return t.activeModal.dismiss("Cross click")}),u._uU(22,"Close"),u.qZA(),u.qZA(),u.qZA()),2&e&&(u.xp6(2),u.Q6J("translate","reset.title_clear_cached_accessories"),u.xp6(6),u.Q6J("translate","reset.title_warning"),u.xp6(2),u.Q6J("translate","reset.message_action_is_irreversible"),u.xp6(3),u.Q6J("translate","reset.message_remove_cached_accessories"),u.xp6(2),u.Q6J("translate","reset.accessories_will_may_need_to_be_reconfigured"),u.xp6(3),u.Q6J("disabled",t.clicked)("translate","reset.title_clear_cached_accessories"),u.xp6(3),u.Q6J("translate","form.button_close"))},directives:[r.Pi],styles:[""]}),e})(),_=(()=>{class e{constructor(e,t,s,i,a){this.activeModal=e,this.toastr=t,this.translate=s,this.$route=i,this.$api=a}onResetHomebridgeAccessoryClick(){return this.clicked=!0,this.$api.put("/server/reset-homebridge-accessory",{}).subscribe(e=>{this.toastr.success(this.translate.instant("reset.toast_accessory_reset"),this.translate.instant("toast.title_success")),this.activeModal.close(),this.$route.navigate(["/restart"])},e=>(0,c.mG)(this,void 0,void 0,function*(){this.toastr.error(this.translate.instant("reset.toast_failed_to_reset"),this.translate.instant("toast.title_error"))}))}}return e.\u0275fac=function(t){return new(t||e)(u.Y36(n.Kz),u.Y36(p._W),u.Y36(r.sK),u.Y36(o.F0),u.Y36(m.s))},e.\u0275cmp=u.Xpm({type:e,selectors:[["ng-component"]],decls:31,vars:13,consts:[[1,"modal-content"],[1,"modal-header"],[1,"modal-title",3,"translate"],["type","button","data-dismiss","modal","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"text-center","primary-text",3,"translate"],[1,"text-center","grey-text",3,"translate"],[3,"translate"],[3,"innerHTML"],[1,"text-center"],["type","button","data-dismiss","modal",1,"btn","btn-elegant",3,"disabled","translate","click"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn","btn-primary",3,"translate","click"]],template:function(e,t){1&e&&(u.TgZ(0,"div",0),u.TgZ(1,"div",1),u.TgZ(2,"h5",2),u._uU(3,"Reset Homebridge Accessory"),u.qZA(),u.TgZ(4,"button",3),u.NdJ("click",function(){return t.activeModal.dismiss("Cross click")}),u.TgZ(5,"span",4),u._uU(6,"\xd7"),u.qZA(),u.qZA(),u.qZA(),u.TgZ(7,"div",5),u.TgZ(8,"h3",6),u._uU(9,"Warning"),u.qZA(),u.TgZ(10,"p",7),u._uU(11,"This action is irreversible. Please read carefully before proceeding."),u.qZA(),u.TgZ(12,"ul"),u.TgZ(13,"li",8),u._uU(14,"A reset will unpair this Homebridge instance from your Apple HomeKit setup."),u.qZA(),u.TgZ(15,"li",8),u._uU(16,"You will need to remove the existing Homebridge accessory from the Home app manually."),u.qZA(),u.TgZ(17,"li",8),u._uU(18,"All automations and will need to be reconfigured after a reset."),u.qZA(),u.TgZ(19,"li",8),u._uU(20,"Your Homebridge username and pin will be changed."),u.qZA(),u.TgZ(21,"li"),u.TgZ(22,"strong",9),u.ALo(23,"translate"),u._uU(24,"The rest of your config will not be changed. If Homebridge is not starting due to a bad config a reset will not fix it."),u.qZA(),u.qZA(),u.qZA(),u.TgZ(25,"div",10),u.TgZ(26,"button",11),u.NdJ("click",function(){return t.onResetHomebridgeAccessoryClick()}),u._uU(27,"Reset Homebridge Now"),u.qZA(),u.qZA(),u.qZA(),u.TgZ(28,"div",12),u.TgZ(29,"button",13),u.NdJ("click",function(){return t.activeModal.dismiss("Cross click")}),u._uU(30,"Close"),u.qZA(),u.qZA(),u.qZA()),2&e&&(u.xp6(2),u.Q6J("translate","reset.title_reset_homebridge_accessory"),u.xp6(6),u.Q6J("translate","reset.title_warning"),u.xp6(2),u.Q6J("translate","reset.message_action_is_irreversible"),u.xp6(3),u.Q6J("translate","reset.message_reset_will_unpair_from_homekit"),u.xp6(2),u.Q6J("translate","reset.message_need_to_remove_homebridge_accessory_from_home_app"),u.xp6(2),u.Q6J("translate","reset.message_all_automations_will_be_reset"),u.xp6(2),u.Q6J("translate","reset.message_your_homebridge_username_will_be_changed"),u.xp6(3),u.Q6J("innerHTML",u.lcZ(23,11,"reset.message_accessory_config_will_not_be_changed"),u.oJD),u.xp6(4),u.Q6J("disabled",t.clicked)("translate","reset.button_reset_homebridge_now"),u.xp6(3),u.Q6J("translate","form.button_close"))},directives:[r.Pi],pipes:[r.X$],encapsulation:2}),e})();const h=function(e,t){return{"fa-trash":e,"fa-cog fa-spin":t}};function b(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"li",11),u.TgZ(1,"span"),u._uU(2),u._UZ(3,"br"),u.TgZ(4,"small",12),u._uU(5),u.qZA(),u.qZA(),u.TgZ(6,"button",13),u.NdJ("click",function(){const t=u.CHM(e).$implicit;return u.oxw().removeAccessory(t)}),u._UZ(7,"i",14),u.qZA(),u.qZA()}if(2&e){const e=t.$implicit,s=u.oxw();u.xp6(2),u.AsE(" ",e.displayName," (",e.plugin,") "),u.xp6(3),u.Oqu(e.UUID),u.xp6(1),u.Q6J("disabled",s.deleting),u.xp6(1),u.Q6J("ngClass",u.WLB(5,h,e.UUID!==s.deleting,e.UUID===s.deleting))}}let f=(()=>{class e{constructor(e,t,s,i){this.activeModal=e,this.toastr=t,this.translate=s,this.$api=i,this.deleting=null}ngOnInit(){this.loadCachedAccessories()}loadCachedAccessories(){return(0,c.mG)(this,void 0,void 0,function*(){try{this.cachedAccessories=yield this.$api.get("/server/cached-accessories").toPromise()}catch(e){this.toastr.error("Accessory cache could not be loaded. You may not have any cached accessories.",this.translate.instant("toast.title_error")),this.activeModal.close()}})}removeAccessory(e){this.deleting=e.UUID,this.toastr.info(this.translate.instant("reset.toast_removing_cached_accessory_please_wait")),this.$api.delete(`/server/cached-accessories/${e.UUID}`,{params:{cacheFile:e.$cacheFile}}).subscribe(e=>(0,c.mG)(this,void 0,void 0,function*(){yield this.loadCachedAccessories(),this.deleting=null,this.cachedAccessories.length||this.activeModal.close(),this.toastr.success(this.translate.instant("reset.toast_cached_accessory_removed"),this.translate.instant("toast.title_success"))}),e=>{this.deleting=null,this.toastr.error(this.translate.instant("reset.toast_failed_to_delete_cached_accessory"),this.translate.instant("toast.title_error"))})}}return e.\u0275fac=function(t){return new(t||e)(u.Y36(n.Kz),u.Y36(p._W),u.Y36(r.sK),u.Y36(m.s))},e.\u0275cmp=u.Xpm({type:e,selectors:[["app-remove-single-cached-accessory-modal"]],decls:16,vars:8,consts:[[1,"modal-content"],[1,"modal-header"],[1,"modal-title",3,"translate"],["type","button","data-dismiss","modal","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],["type","info",3,"dismissible"],[1,"list-group","mt-2"],["class","list-group-item d-flex justify-content-between align-items-center",4,"ngFor","ngForOf"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn","btn-primary",3,"disabled","translate","click"],[1,"list-group-item","d-flex","justify-content-between","align-items-center"],[1,"grey-text"],[1,"btn","btn-danger",3,"disabled","click"],[1,"fas",3,"ngClass"]],template:function(e,t){1&e&&(u.TgZ(0,"div",0),u.TgZ(1,"div",1),u.TgZ(2,"h5",2),u._uU(3," Remove Single Cached Accessory "),u.qZA(),u.TgZ(4,"button",3),u.NdJ("click",function(){return t.activeModal.dismiss("Cross click")}),u.TgZ(5,"span",4),u._uU(6,"\xd7"),u.qZA(),u.qZA(),u.qZA(),u.TgZ(7,"div",5),u.TgZ(8,"ngb-alert",6),u._uU(9),u.ALo(10,"translate"),u.qZA(),u.TgZ(11,"ul",7),u.YNc(12,b,8,8,"li",8),u.qZA(),u.qZA(),u.TgZ(13,"div",9),u.TgZ(14,"button",10),u.NdJ("click",function(){return t.activeModal.dismiss("Cross click")}),u._uU(15,"Close"),u.qZA(),u.qZA(),u.qZA()),2&e&&(u.xp6(2),u.Q6J("translate","reset.title_clear_cached_accessories_single"),u.xp6(6),u.Q6J("dismissible",!1),u.xp6(1),u.hij(" ",u.lcZ(10,6,"reset.message_remove_cached_accessories_single_warning")," "),u.xp6(3),u.Q6J("ngForOf",t.cachedAccessories),u.xp6(2),u.Q6J("disabled",t.deleting)("translate","form.button_close"))},directives:[r.Pi,n.xm,i.sg,i.mk],pipes:[r.X$],styles:[""]}),e})();const A=function(e,t){return{"fa-trash":e,"fa-cog fa-spin":t}};function v(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"li",11),u.TgZ(1,"span"),u._uU(2),u.ALo(3,"titlecase"),u._UZ(4,"br"),u.TgZ(5,"small",12),u._uU(6),u.qZA(),u.qZA(),u.TgZ(7,"button",13),u.NdJ("click",function(){const t=u.CHM(e).$implicit;return u.oxw().removeAccessory(t._id)}),u._UZ(8,"i",14),u.qZA(),u.qZA()}if(2&e){const e=t.$implicit,s=u.oxw();u.xp6(2),u.AsE(" ",e.displayName," (",e._main?"Homebridge":u.lcZ(3,5,e._category),") "),u.xp6(4),u.Oqu(e._username),u.xp6(1),u.Q6J("disabled",s.deleting),u.xp6(1),u.Q6J("ngClass",u.WLB(7,A,e._id!==s.deleting,e._id===s.deleting))}}let T=(()=>{class e{constructor(e,t,s,i){this.activeModal=e,this.toastr=t,this.translate=s,this.$api=i,this.deleting=null}ngOnInit(){this.loadPairings()}loadPairings(){return(0,c.mG)(this,void 0,void 0,function*(){try{this.pairings=(yield this.$api.get("/server/pairings").toPromise()).sort((e,t)=>t._main?1:-1)}catch(e){this.toastr.error("Paired accessories could not be loaded.",this.translate.instant("toast.title_error")),this.activeModal.close()}})}removeAccessory(e){this.deleting=e,this.$api.delete(`/server/pairings/${e}`).subscribe(e=>(0,c.mG)(this,void 0,void 0,function*(){yield this.loadPairings(),this.pairings.length||this.activeModal.close(),this.deleting=null,this.toastr.success(this.translate.instant("plugins.settings.toast_restart_required"),this.translate.instant("toast.title_success"))}),e=>{this.deleting=null,this.toastr.error("Failed to un-pair accessory.",this.translate.instant("toast.title_error"))})}}return e.\u0275fac=function(t){return new(t||e)(u.Y36(n.Kz),u.Y36(p._W),u.Y36(r.sK),u.Y36(m.s))},e.\u0275cmp=u.Xpm({type:e,selectors:[["app-unpair-accessory-modal"]],decls:15,vars:8,consts:[[1,"modal-content"],[1,"modal-header"],[1,"modal-title",3,"translate"],["type","button","data-dismiss","modal","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],["type","info",3,"dismissible"],[1,"list-group","mt-2"],["class","list-group-item d-flex justify-content-between align-items-center",4,"ngFor","ngForOf"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn","btn-primary",3,"disabled","translate","click"],[1,"list-group-item","d-flex","justify-content-between","align-items-center"],[1,"grey-text"],[1,"btn","btn-danger",3,"disabled","click"],[1,"fas",3,"ngClass"]],template:function(e,t){1&e&&(u.TgZ(0,"div",0),u.TgZ(1,"div",1),u._UZ(2,"h5",2),u.TgZ(3,"button",3),u.NdJ("click",function(){return t.activeModal.dismiss("Cross click")}),u.TgZ(4,"span",4),u._uU(5,"\xd7"),u.qZA(),u.qZA(),u.qZA(),u.TgZ(6,"div",5),u.TgZ(7,"ngb-alert",6),u._uU(8),u.ALo(9,"translate"),u.qZA(),u.TgZ(10,"ul",7),u.YNc(11,v,9,10,"li",8),u.qZA(),u.qZA(),u.TgZ(12,"div",9),u.TgZ(13,"button",10),u.NdJ("click",function(){return t.activeModal.dismiss("Cross click")}),u._uU(14,"Close"),u.qZA(),u.qZA(),u.qZA()),2&e&&(u.xp6(2),u.Q6J("translate","reset.title_unpair_bridges_cameras_tv_external_accessories"),u.xp6(5),u.Q6J("dismissible",!1),u.xp6(1),u.hij(" ",u.lcZ(9,6,"reset.message_need_to_remove_homebridge_accessory_from_home_app")," "),u.xp6(3),u.Q6J("ngForOf",t.pairings),u.xp6(2),u.Q6J("disabled",t.deleting)("translate","form.button_close"))},directives:[r.Pi,n.xm,i.sg,i.mk],pipes:[r.X$,i.rS],styles:[""]}),e})();function q(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"li",16),u.TgZ(1,"span"),u.TgZ(2,"label",17),u.TgZ(3,"input",18),u.NdJ("ngModelChange",function(t){return u.CHM(e).$implicit.selected=t}),u.qZA(),u.TgZ(4,"span"),u._uU(5),u.qZA(),u._UZ(6,"span",19),u.qZA(),u.qZA(),u.TgZ(7,"span"),u._uU(8),u.qZA(),u.qZA()}if(2&e){const e=t.$implicit;u.xp6(2),u.Q6J("for","adapter"+e.iface),u.xp6(1),u.Q6J("id","adapter"+e.iface)("ngModel",e.selected),u.xp6(2),u.Oqu(e.iface),u.xp6(3),u.hij(" ",e.ip4||e.ip6," ")}}let x=(()=>{class e{constructor(e){this.activeModal=e}ngOnInit(){}submit(){this.activeModal.close(this.availableNetworkAdapters.filter(e=>e.selected).map(e=>e.iface))}}return e.\u0275fac=function(t){return new(t||e)(u.Y36(n.Kz))},e.\u0275cmp=u.Xpm({type:e,selectors:[["app-select-network-interfaces"]],inputs:{availableNetworkAdapters:"availableNetworkAdapters",bridgeNetworkAdapters:"bridgeNetworkAdapters"},decls:22,vars:3,consts:[[1,"modal-content"],[1,"modal-header"],["translate","settings.network.title_network_interfaces",1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],["translate","settings.network.message_network_interface_one"],["translate","settings.network.message_network_interface_two"],[1,"list-group","mb-4"],[1,"mt-2","d-flex","flex-row","justify-content-between"],["translate","settings.network.label_interface_name"],["translate","settings.network.label_ip_address"],["class","mt-2 d-flex flex-row flex-wrap justify-content-between",4,"ngFor","ngForOf"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn","btn-elegant","mr-auto",3,"translate","click"],["type","button","data-dismiss","modal",1,"btn","btn-primary",3,"translate","click"],[1,"mt-2","d-flex","flex-row","flex-wrap","justify-content-between"],[1,"hb-uix-switch","d-inline","pr-3",3,"for"],["type","checkbox",3,"id","ngModel","ngModelChange"],[1,"hb-uix-slider","hb-uix-round"]],template:function(e,t){1&e&&(u.TgZ(0,"div",0),u.TgZ(1,"div",1),u._UZ(2,"h5",2),u.TgZ(3,"button",3),u.NdJ("click",function(){return t.activeModal.dismiss("Cross click")}),u.TgZ(4,"span",4),u._uU(5,"\xd7"),u.qZA(),u.qZA(),u.qZA(),u.TgZ(6,"div",5),u._UZ(7,"p",6),u._UZ(8,"p",7),u.TgZ(9,"div"),u.TgZ(10,"ul",8),u.TgZ(11,"li",9),u.TgZ(12,"span"),u._UZ(13,"strong",10),u.qZA(),u.TgZ(14,"span"),u._UZ(15,"strong",11),u.qZA(),u.qZA(),u.YNc(16,q,9,5,"li",12),u.qZA(),u.qZA(),u.qZA(),u.TgZ(17,"div",13),u.TgZ(18,"button",14),u.NdJ("click",function(){return t.activeModal.dismiss("Cross click")}),u._uU(19,"Cancel"),u.qZA(),u.TgZ(20,"button",15),u.NdJ("click",function(){return t.submit()}),u._uU(21,"Save"),u.qZA(),u.qZA(),u.qZA()),2&e&&(u.xp6(16),u.Q6J("ngForOf",t.availableNetworkAdapters),u.xp6(2),u.Q6J("translate","form.button_cancel"),u.xp6(2),u.Q6J("translate","form.button_save"))},directives:[r.Pi,i.sg,a.Wl,a.JJ,a.On],styles:[""]}),e})();var k=s(92503),y=s(37319);function w(e,t){1&e&&(u.TgZ(0,"button",17),u._uU(1,"Restart Required"),u.qZA()),2&e&&u.Q6J("translate","platform.docker.settings.button_restart_required")}function U(e,t){1&e&&u._UZ(0,"i",28)}const N=function(e,t){return{"badge-danger":e,"badge-info":t}};function C(e,t){if(1&e&&(u.TgZ(0,"span"),u.TgZ(1,"span",26),u.YNc(2,U,1,0,"i",27),u._uU(3),u.qZA(),u.qZA()),2&e){const e=t.$implicit;u.xp6(1),u.Q6J("ngbTooltip",e.missing?"Not Connected":e.ip4||e.ip6)("ngClass",u.WLB(4,N,e.missing,!e.missing)),u.xp6(1),u.Q6J("ngIf",e.missing),u.xp6(1),u.hij(" ",e.iface," ")}}function J(e,t){1&e&&(u.TgZ(0,"option",29),u._uU(1,"Avahi"),u.qZA())}const $=function(e){return{"fa-pulse":e}};function I(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"div",6),u._UZ(1,"h5",18),u.TgZ(2,"ul",9),u.TgZ(3,"li",10),u.TgZ(4,"span",11),u.TgZ(5,"div"),u._uU(6),u.ALo(7,"translate"),u.TgZ(8,"a",12),u.ALo(9,"translate"),u._UZ(10,"i",13),u.qZA(),u.qZA(),u.YNc(11,C,4,7,"span",19),u.qZA(),u.TgZ(12,"button",20),u.NdJ("click",function(){return u.CHM(e),u.oxw().selectNetworkInterfaces()}),u.ALo(13,"translate"),u._UZ(14,"i",21),u.qZA(),u.qZA(),u.TgZ(15,"li",10),u.TgZ(16,"span"),u._uU(17),u.ALo(18,"translate"),u.TgZ(19,"a",12),u.ALo(20,"translate"),u._UZ(21,"i",13),u.qZA(),u.qZA(),u.TgZ(22,"div"),u.TgZ(23,"select",22),u.ALo(24,"translate"),u.TgZ(25,"option",23),u._uU(26,"Bonjour HAP"),u.qZA(),u.YNc(27,J,2,0,"option",24),u.TgZ(28,"option",25),u._uU(29,"Ciao"),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA()}if(2&e){const e=u.oxw();u.xp6(6),u.hij("",u.lcZ(7,12,"settings.network.title_network_interfaces")," "),u.xp6(2),u.s9C("ngbTooltip",u.lcZ(9,14,"settings.network.message_network_interface_one")),u.xp6(3),u.Q6J("ngForOf",e.bridgeNetworkAdapters),u.xp6(1),u.Q6J("translate","reset.title_clear_cached_accessories")("disabled",!e.availableNetworkAdapters.length),u.uIk("aria-label",u.lcZ(13,16,"settings.network.title_network_interfaces")),u.xp6(2),u.Q6J("ngClass",u.VKq(24,$,!e.availableNetworkAdapters.length)),u.xp6(3),u.hij(" ",u.lcZ(18,18,"settings.mdns_advertiser")," "),u.xp6(2),u.s9C("ngbTooltip",u.lcZ(20,20,"settings.mdns_advertiser_help")),u.xp6(4),u.Q6J("formControl",e.legacyMdnsFormControl),u.uIk("aria-label",u.lcZ(24,22,"settings.mdns_advertiser")),u.xp6(4),u.Q6J("ngIf",e.showAvahiMdnsOption)}}function M(e,t){1&e&&(u.TgZ(0,"div",44),u._uU(1),u.ALo(2,"translate"),u.TgZ(3,"a",45),u._uU(4,"https://github.com/oznu/docker-homebridge"),u.qZA(),u.qZA()),2&e&&(u.xp6(1),u.hij(" ",u.lcZ(2,1,"platform.docker.settings.message_image_upgrade_required")," "))}function Q(e,t){if(1&e&&(u.TgZ(0,"div",40),u.TgZ(1,"div",41),u.YNc(2,M,5,3,"div",42),u.TgZ(3,"div",43),u._uU(4," Changing these values will override the corresponding environment variables you may have set with the docker run command. "),u.qZA(),u.qZA(),u.qZA()),2&e){const e=u.oxw(2);u.xp6(2),u.Q6J("ngIf",!e.$settings.env.ableToConfigureSelf),u.xp6(1),u.Q6J("translate","platform.docker.settings.message_env_warning")}}function E(e,t){1&e&&(u.TgZ(0,"li",10),u.TgZ(1,"span"),u._uU(2,"Keep accessories of uninstalled plugins "),u.TgZ(3,"code"),u._uU(4,"-K"),u.qZA(),u.qZA(),u._UZ(5,"input",46),u._UZ(6,"label",47),u.qZA())}function O(e,t){1&e&&(u.TgZ(0,"div",48),u.TgZ(1,"h5",31),u._uU(2),u.ALo(3,"translate"),u.qZA(),u.TgZ(4,"ul",9),u.TgZ(5,"li",10),u.TgZ(6,"span"),u._uU(7," DEBUG "),u.TgZ(8,"a",49),u._UZ(9,"i",13),u.qZA(),u.qZA(),u.TgZ(10,"div",50),u._UZ(11,"input",51),u.qZA(),u.qZA(),u.TgZ(12,"li",10),u.TgZ(13,"span"),u._uU(14," NODE_OPTIONS "),u.TgZ(15,"a",52),u._UZ(16,"i",13),u.qZA(),u.qZA(),u.TgZ(17,"div",50),u._UZ(18,"input",53),u.qZA(),u.qZA(),u.qZA(),u.qZA()),2&e&&(u.xp6(2),u.Oqu(u.lcZ(3,1,"settings.title_environment_variables")))}function F(e,t){if(1&e&&(u.TgZ(0,"form",30),u.TgZ(1,"h5",31),u._uU(2),u.ALo(3,"translate"),u.qZA(),u.YNc(4,Q,5,2,"div",32),u.TgZ(5,"ul",33),u.TgZ(6,"li",10),u.TgZ(7,"span"),u._uU(8,"Homebridge Debug Mode "),u.TgZ(9,"code"),u._uU(10,"-D"),u.qZA(),u.qZA(),u._UZ(11,"input",34),u._UZ(12,"label",35),u.qZA(),u.TgZ(13,"li",10),u.TgZ(14,"span"),u._uU(15,' Homebridge "Insecure" Mode '),u.TgZ(16,"span",2),u._uU(17," / Enable Accessory Control "),u.qZA(),u.TgZ(18,"code"),u._uU(19,"-I"),u.qZA(),u.qZA(),u._UZ(20,"input",36),u._UZ(21,"label",37),u.qZA(),u.YNc(22,E,7,0,"li",38),u.qZA(),u.YNc(23,O,19,3,"div",39),u.qZA()),2&e){const e=u.oxw();u.Q6J("formGroup",e.serviceForm),u.xp6(2),u.Oqu(u.lcZ(3,5,"settings.title_startup_options")),u.xp6(2),u.Q6J("ngIf",e.$settings.env.runningInDocker),u.xp6(18),u.Q6J("ngIf",e.$settings.env.serviceMode),u.xp6(1),u.Q6J("ngIf",e.$settings.env.serviceMode)}}function L(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"div",54),u.TgZ(1,"h5",7),u._uU(2),u.ALo(3,"translate"),u.qZA(),u.TgZ(4,"div",8),u._uU(5),u.ALo(6,"translate"),u.qZA(),u.TgZ(7,"ul",9),u.TgZ(8,"li",10),u.TgZ(9,"span",11),u._uU(10),u.ALo(11,"translate"),u.TgZ(12,"a",12),u.ALo(13,"translate"),u._UZ(14,"i",13),u.qZA(),u.qZA(),u.TgZ(15,"button",55),u.NdJ("click",function(){return u.CHM(e),u.oxw().removeSingleCachedAccessories()}),u.ALo(16,"translate"),u._UZ(17,"i",15),u.qZA(),u.qZA(),u.TgZ(18,"li",10),u.TgZ(19,"span",11),u._uU(20),u.ALo(21,"translate"),u.TgZ(22,"a",12),u.ALo(23,"translate"),u._UZ(24,"i",13),u.qZA(),u.qZA(),u.TgZ(25,"button",55),u.NdJ("click",function(){return u.CHM(e),u.oxw().removeAllCachedAccessories()}),u.ALo(26,"translate"),u._UZ(27,"i",15),u.qZA(),u.qZA(),u.qZA(),u.TgZ(28,"h5",7),u._uU(29),u.ALo(30,"translate"),u.qZA(),u.TgZ(31,"ul",9),u.TgZ(32,"li",10),u.TgZ(33,"span",11),u._uU(34),u.ALo(35,"translate"),u.TgZ(36,"a",12),u.ALo(37,"translate"),u._UZ(38,"i",13),u.qZA(),u.qZA(),u.TgZ(39,"button",14),u.NdJ("click",function(){return u.CHM(e),u.oxw().forceRestartService()}),u.ALo(40,"translate"),u._UZ(41,"i",56),u.qZA(),u.qZA(),u.qZA(),u.qZA()}2&e&&(u.xp6(2),u.Oqu(u.lcZ(3,14,"settings.title_manage_cached_accessories")),u.xp6(3),u.hij(" ",u.lcZ(6,16,"settings.manage_cache.help")," "),u.xp6(5),u.hij(" ",u.lcZ(11,18,"reset.title_clear_cached_accessories_single")," "),u.xp6(2),u.s9C("ngbTooltip",u.lcZ(13,20,"reset.message_remove_cached_accessories_single")),u.xp6(3),u.Q6J("translate","reset.title_clear_cached_accessories_single"),u.uIk("aria-label",u.lcZ(16,22,"reset.title_clear_cached_accessories_single")),u.xp6(5),u.hij(" ",u.lcZ(21,24,"reset.title_clear_cached_accessories")," "),u.xp6(2),u.s9C("ngbTooltip",u.lcZ(23,26,"reset.message_remove_cached_accessories")),u.xp6(3),u.Q6J("translate","reset.title_clear_cached_accessories"),u.uIk("aria-label",u.lcZ(26,28,"reset.title_clear_cached_accessories")),u.xp6(4),u.Oqu(u.lcZ(30,30,"settings.title_actions")),u.xp6(5),u.hij(" ",u.lcZ(35,32,"reset.title_force_restart_hb_service")," "),u.xp6(2),u.s9C("ngbTooltip",u.lcZ(37,34,"reset.message_force_restart_hb_help_text")),u.xp6(3),u.uIk("aria-label",u.lcZ(40,36,"reset.title_force_restart_hb_service")))}const Y=[{path:"",component:(()=>{class e{constructor(e,t,s,i,r,n,o,l,c){this.$settings=e,this.$api=t,this.$notification=s,this.$fb=i,this.$toastr=r,this.$modal=n,this.$route=o,this.$router=l,this.translate=c,this.legacyMdnsFormControl=new a.NI(!1),this.saved=!1,this.showNetworking=!1,this.showAvahiMdnsOption=!1,this.availableNetworkAdapters=[],this.bridgeNetworkAdapters=[]}ngOnInit(){this.initNetworkingOptions(),this.$settings.env.serviceMode?this.initServiceModeForm():this.$settings.env.runningInDocker&&this.initDockerForm()}initDockerForm(){this.serviceForm=this.$fb.group({HOMEBRIDGE_DEBUG:[!1],HOMEBRIDGE_INSECURE:[!1]}),this.$api.get("/platform-tools/docker/env").subscribe(e=>{this.serviceForm.patchValue(e),this.serviceForm.valueChanges.subscribe(this.saveDockerSettings.bind(this))},e=>{this.$toastr.error(e.message,"Failed to load docker settings")})}saveDockerSettings(e=this.serviceForm.value){this.$api.put("/platform-tools/docker/env",e).subscribe(()=>{this.$toastr.success(this.translate.instant("platform.docker.settings.toast_container_restart_required"),this.translate.instant("platform.docker.settings.toast_title_settings_saved")),this.saved=!0,this.$notification.configUpdated.next()})}initServiceModeForm(){this.serviceForm=this.$fb.group({HOMEBRIDGE_DEBUG:[!1],HOMEBRIDGE_KEEP_ORPHANS:[!1],HOMEBRIDGE_INSECURE:[!0],ENV_DEBUG:[null],ENV_NODE_OPTIONS:[null]}),this.$api.get("/platform-tools/hb-service/homebridge-startup-settings").subscribe(e=>{this.serviceForm.patchValue(e),this.serviceForm.valueChanges.pipe((0,d.b)(500)).subscribe(this.saveServiceModeSettings.bind(this))},e=>{this.$toastr.error(e.message,"Failed to load docker settings")})}saveServiceModeSettings(e=this.serviceForm.value){this.$api.put("/platform-tools/hb-service/homebridge-startup-settings",e).subscribe(()=>{this.saved=!0,this.$notification.configUpdated.next()})}resetHomebridgeState(){this.$modal.open(_,{size:"lg"})}unpairAccessory(){this.$modal.open(T,{size:"lg"})}removeAllCachedAccessories(){this.$modal.open(Z,{size:"lg"})}removeSingleCachedAccessories(){this.$modal.open(f,{size:"lg"})}forceRestartService(){this.$api.put("/platform-tools/hb-service/set-full-service-restart-flag",{}).subscribe(()=>{this.$router.navigate(["/restart"])},e=>{this.$toastr.error(e.message,"Failed to set force setvice restart flag.")})}initNetworkingOptions(){return(0,c.mG)(this,void 0,void 0,function*(){try{const e=yield this.$api.get("/status/homebridge-version").toPromise();g.gte(e.installedVersion,"1.3.0-beta.0",{includePrerelease:!0})&&(this.showNetworking=!0,this.getNetworkSettings()),g.gte(e.installedVersion,"1.4.0-beta.0",{includePrerelease:!0})&&(this.$settings.env.runningInLinux||this.$settings.env.runningInDocker||this.$settings.env.runningInSynologyPackage)&&(this.showAvahiMdnsOption=!0)}catch(e){}})}getNetworkSettings(){return(0,c.mG)(this,void 0,void 0,function*(){return Promise.all([this.$api.get("/server/network-interfaces/system").toPromise(),this.$api.get("/server/network-interfaces/bridge").toPromise(),this.$api.get("/server/mdns-advertiser").toPromise()]).then(([e,t,s])=>{this.availableNetworkAdapters=e,this.buildBridgeNetworkAdapterList(t),this.legacyMdnsFormControl.patchValue(s.advertiser),this.legacyMdnsFormControl.valueChanges.subscribe(e=>{this.setHomebridgeMdnsSetting(e)})})})}setHomebridgeMdnsSetting(e){return(0,c.mG)(this,void 0,void 0,function*(){this.$api.put("/server/mdns-advertiser",{advertiser:e}).subscribe(()=>{this.saved=!0,this.$notification.configUpdated.next()},e=>{this.$toastr.error(e.message,"Failed to set mdns advertiser.")})})}setNetworkInterfaces(e){return(0,c.mG)(this,void 0,void 0,function*(){this.$api.put("/server/network-interfaces/bridge",{adapters:e}).subscribe(()=>{this.saved=!0,this.$notification.configUpdated.next()},e=>{this.$toastr.error(e.message,"Failed to set network adapters.")})})}buildBridgeNetworkAdapterList(e){this.bridgeNetworkAdapters=e.length?e.map(e=>{const t=this.availableNetworkAdapters.find(t=>t.iface===e);return t?(t.selected=!0,t.missing=!1,t):{iface:e,missing:!0}}):[]}selectNetworkInterfaces(){const e=this.$modal.open(x,{size:"lg"});e.componentInstance.availableNetworkAdapters=this.availableNetworkAdapters,e.componentInstance.bridgeNetworkAdapters=this.bridgeNetworkAdapters,e.result.then(e=>{this.buildBridgeNetworkAdapterList(e),this.setNetworkInterfaces(e)}).catch(()=>{})}}return e.\u0275fac=function(t){return new(t||e)(u.Y36(k.g),u.Y36(m.s),u.Y36(y.g),u.Y36(a.qu),u.Y36(p._W),u.Y36(n.FF),u.Y36(o.gz),u.Y36(o.F0),u.Y36(r.sK))},e.\u0275cmp=u.Xpm({type:e,selectors:[["app-settings"]],decls:38,vars:30,consts:[[1,"d-flex","justify-content-between"],[1,"primary-text","m-0"],[1,"d-none","d-md-inline"],["class","btn btn-primary waves-effect m-0","routerLink","/restart",3,"translate",4,"ngIf"],["class","mb-3",4,"ngIf"],["class","mt-3 mb-3","novalidate","",3,"formGroup",4,"ngIf"],[1,"mb-3"],[1,"primary-text","mt-3"],["role","alert",1,"alert","alert-info"],[1,"list-group","mt-2"],[1,"list-group-item","d-flex","justify-content-between","align-items-center"],[1,"pr-2"],["href","javascript:void(0)",3,"ngbTooltip"],[1,"fas","fa-info-circle","primary-text"],[1,"btn","btn-primary","waves-effect","m-0",3,"click"],[1,"fas","fa-flip-horizontal","fa-external-link-square-alt"],["class","pb-3",4,"ngIf"],["routerLink","/restart",1,"btn","btn-primary","waves-effect","m-0",3,"translate"],["translate","settings.network.title_network",1,"primary-text","mt-3"],[4,"ngFor","ngForOf"],[1,"btn","btn-primary","waves-effect","m-0",3,"translate","disabled","click"],[1,"fas","fa-cog",3,"ngClass"],[1,"custom-select",3,"formControl"],["value","bonjour-hap"],["value","avahi",4,"ngIf"],["value","ciao"],["placement","bottom-left","openDelay","150",1,"badge","badge-pill","mr-1",3,"ngbTooltip","ngClass"],["class","fas fa-exclamation-triangle",4,"ngIf"],[1,"fas","fa-exclamation-triangle"],["value","avahi"],["novalidate","",1,"mt-3","mb-3",3,"formGroup"],[1,"primary-text"],["class","row mt-3",4,"ngIf"],[1,"list-group"],["type","checkbox","id","homebridgeDebugMode","formControlName","HOMEBRIDGE_DEBUG","aria-label","Debug Mode",1,"rendux-input"],["for","homebridgeDebugMode",1,"rendux-label"],["type","checkbox","id","homebridgeInsecureMode","formControlName","HOMEBRIDGE_INSECURE","aria-label","Insecure Mode",1,"rendux-input"],["for","homebridgeInsecureMode",1,"rendux-label"],["class","list-group-item d-flex justify-content-between align-items-center",4,"ngIf"],["class","mt-3",4,"ngIf"],[1,"row","mt-3"],[1,"col-md-12"],["class","alert alert-danger","role","alert",4,"ngIf"],["role","alert",1,"alert","alert-info",3,"translate"],["role","alert",1,"alert","alert-danger"],["target","_blank","rel","noopener noreferrer","href","https://github.com/oznu/docker-homebridge"],["type","checkbox","id","homebridgeKeepOrphans","formControlName","HOMEBRIDGE_KEEP_ORPHANS","aria-label","Keep accessories of uninstall plugins",1,"rendux-input"],["for","homebridgeKeepOrphans",1,"rendux-label"],[1,"mt-3"],["href","javascript:void(0)","ngbTooltip","Some plugins require you to set the DEBUG environment variable to enable debug level logging."],[1,"pull-right"],["formControlName","ENV_DEBUG","type","text",1,"form-control","form-control-sm"],["href","https://nodejs.org/api/cli.html","target","_blank","ngbTooltip","Node.js runtime options for the Homebridge process. This should be kept blank unless you know what you are doing."],["formControlName","ENV_NODE_OPTIONS","type","text",1,"form-control","form-control-sm"],[1,"pb-3"],[1,"btn","btn-primary","waves-effect","m-0",3,"translate","click"],[1,"fas","fa-sync"]],template:function(e,t){1&e&&(u.TgZ(0,"div",0),u.TgZ(1,"h3",1),u.TgZ(2,"span",2),u._uU(3,"Homebridge"),u.qZA(),u._uU(4," Settings "),u.qZA(),u.YNc(5,w,2,1,"button",3),u.qZA(),u.YNc(6,I,30,26,"div",4),u.YNc(7,F,24,7,"form",5),u.TgZ(8,"div",6),u.TgZ(9,"h5",7),u._uU(10),u.ALo(11,"translate"),u.qZA(),u.TgZ(12,"div",8),u._uU(13),u.ALo(14,"translate"),u.qZA(),u.TgZ(15,"ul",9),u.TgZ(16,"li",10),u.TgZ(17,"span",11),u._uU(18),u.ALo(19,"translate"),u.TgZ(20,"a",12),u.ALo(21,"translate"),u._UZ(22,"i",13),u.qZA(),u.qZA(),u.TgZ(23,"button",14),u.NdJ("click",function(){return t.unpairAccessory()}),u.ALo(24,"translate"),u._UZ(25,"i",15),u.qZA(),u.qZA(),u.TgZ(26,"li",10),u.TgZ(27,"span",11),u._uU(28),u.ALo(29,"titlecase"),u.ALo(30,"translate"),u.TgZ(31,"a",12),u.ALo(32,"translate"),u._UZ(33,"i",13),u.qZA(),u.qZA(),u.TgZ(34,"button",14),u.NdJ("click",function(){return t.resetHomebridgeState()}),u.ALo(35,"translate"),u._UZ(36,"i",15),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.YNc(37,L,42,38,"div",16)),2&e&&(u.xp6(5),u.Q6J("ngIf",t.saved),u.xp6(1),u.Q6J("ngIf",t.showNetworking),u.xp6(1),u.Q6J("ngIf",t.$settings.env.runningInDocker||t.$settings.env.serviceMode),u.xp6(3),u.Oqu(u.lcZ(11,12,"reset.title_reset")),u.xp6(3),u.hij(" ",u.lcZ(14,14,"settings.reset.help")," "),u.xp6(5),u.hij(" ",u.lcZ(19,16,"reset.title_unpair_bridges_cameras_tv_external_accessories")," "),u.xp6(2),u.s9C("ngbTooltip",u.lcZ(21,18,"reset.message_unpair_bridges_cameras_tv_external_accessories")),u.xp6(3),u.uIk("aria-label",u.lcZ(24,20,"reset.title_unpair_bridges_cameras_tv_external_accessories")),u.xp6(5),u.hij(" ",u.lcZ(29,22,u.lcZ(30,24,"reset.title_reset_homebridge_accessory"))," "),u.xp6(3),u.s9C("ngbTooltip",u.lcZ(32,26,"reset.message_reset_will_unpair_from_homekit")),u.xp6(3),u.uIk("aria-label",u.lcZ(35,28,"reset.title_reset_homebridge_accessory")),u.xp6(3),u.Q6J("ngIf",t.$settings.env.serviceMode))},directives:[i.O5,n._L,o.rH,r.Pi,i.sg,i.mk,a.EJ,a.JJ,a.oH,a.YN,a.Kr,a._Y,a.JL,a.sg,a.Wl,a.u,a.Fj],pipes:[r.X$,i.rS],styles:[""]}),e})(),canActivate:[l.u]}];let H=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=u.oAB({type:e}),e.\u0275inj=u.cJS({imports:[[o.Bz.forChild(Y)],o.Bz]}),e})(),D=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=u.oAB({type:e}),e.\u0275inj=u.cJS({imports:[[i.ez,a.u5,a.UX,r.aw,n.IJ,H]]}),e})()}}]);