!function(){function e(e,o){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}function o(e,o){for(var t=0;t<o.length;t++){var n=o[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function t(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}(self.webpackChunkui=self.webpackChunkui||[]).push([[281],{70281:function(o,n,s){"use strict";s.r(n),s.d(n,{AccessoriesModule:function(){return O}});var i=s(38583),a=s(3679),r=s(95935),c=s(71271),l=s(88989),d=s(40294),u=s(63770),g=s(63423),m=s(37716),p=function(){return{standalone:!0}},f=function(){var o=function(){function o(t){e(this,o),this.activeModal=t}return t(o,[{key:"ngOnInit",value:function(){}}]),o}();return o.\u0275fac=function(e){return new(e||o)(m.Y36(c.Kz))},o.\u0275cmp=m.Xpm({type:o,selectors:[["app-add-room-modal"]],inputs:{roomName:"roomName"},decls:18,vars:7,consts:[[1,"modal-content"],[1,"modal-header"],[1,"modal-title",3,"translate"],["type","button","data-dismiss","modal","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],["role","alert",1,"alert","alert-info",3,"translate"],[1,"md-form"],[1,"fas","fa-home","prefix","grey-text"],["type","text","id","form-name","autofocus","",1,"form-control","pl-0","pr-0",3,"ngModel","ngModelOptions","ngModelChange","keyup.enter"],["for","form-name",3,"translate"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn","btn-primary",3,"translate","click"]],template:function(e,o){1&e&&(m.TgZ(0,"div",0),m.TgZ(1,"div",1),m.TgZ(2,"h5",2),m._uU(3,"Create New Room"),m.qZA(),m.TgZ(4,"button",3),m.NdJ("click",function(){return o.activeModal.dismiss("Cross click")}),m.TgZ(5,"span",4),m._uU(6,"\xd7"),m.qZA(),m.qZA(),m.qZA(),m.TgZ(7,"form"),m.TgZ(8,"div",5),m._UZ(9,"div",6),m.TgZ(10,"div",7),m._UZ(11,"i",8),m.TgZ(12,"input",9),m.NdJ("ngModelChange",function(e){return o.roomName=e})("keyup.enter",function(){return o.activeModal.close(o.roomName)}),m.qZA(),m.TgZ(13,"label",10),m._uU(14,"Room Name"),m.qZA(),m.qZA(),m.qZA(),m.TgZ(15,"div",11),m.TgZ(16,"button",12),m.NdJ("click",function(){return o.activeModal.close(o.roomName)}),m._uU(17,"Create Room"),m.qZA(),m.qZA(),m.qZA(),m.qZA()),2&e&&(m.xp6(2),m.Q6J("translate","accessories.title_create_new_room"),m.xp6(7),m.Q6J("translate","accessories.message_rooms_not_appear_in_homekit"),m.xp6(3),m.Q6J("ngModel",o.roomName)("ngModelOptions",m.DdM(6,p)),m.xp6(1),m.Q6J("translate","accessories.label_room_name"),m.xp6(3),m.Q6J("translate","accessories.button_create_room"))},directives:[r.Pi,a._Y,a.JL,a.F,a.Fj,a.JJ,a.On],encapsulation:2}),o}(),h=s(49344),v=s(92503),Z=s(58605),b=s(7780),_=s(83128),y=function(){var o=function(){function o(){e(this,o)}return t(o,[{key:"ngOnInit",value:function(){}}]),o}();return o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=m.Xpm({type:o,selectors:[["app-drag-here-placeholder"]],decls:3,vars:0,consts:[[1,"accessory-box"],[1,"fas","fa-arrow-alt-circle-down","accessory-icon"],["translate","accessories.control.drag_here",1,"accessory-label"]],template:function(e,o){1&e&&(m.TgZ(0,"div",0),m._UZ(1,"i",1),m._UZ(2,"div",2),m.qZA())},directives:[r.Pi],styles:[".accessory-box[_ngcontent-%COMP%]{opacity:.2}"]}),o}(),x=function(e){return{"cursor-move":e}};function w(e,o){if(1&e&&(m.TgZ(0,"div",18),m.TgZ(1,"div",19),m.TgZ(2,"h5",20),m._uU(3),m.ALo(4,"translate"),m.qZA(),m.qZA(),m.qZA()),2&e){var t=m.oxw().$implicit,n=m.oxw(2);m.xp6(2),m.Q6J("ngClass",m.VKq(4,x,!n.isMobile)),m.xp6(1),m.hij(" ","Default Room"===t.name?m.lcZ(4,2,"accessories.control.default_room"):t.name," ")}}function A(e,o){if(1&e&&(m.ynx(0),m._UZ(1,"app-accessory-tile",24),m.BQk()),2&e){var t=m.oxw().$implicit;m.xp6(1),m.Q6J("service",t)}}function M(e,o){if(1&e&&(m.TgZ(0,"div",23),m.YNc(1,A,2,1,"ng-container",0),m.qZA()),2&e){var t=o.$implicit,n=m.oxw(4);m.Q6J("ngSwitch",t.type),m.xp6(1),m.Q6J("ngIf",!n.hideHidden||!t.hidden)}}function T(e,o){if(1&e){var t=m.EpF();m.TgZ(0,"div",21),m.NdJ("dragulaModelChange",function(e){return m.CHM(t),m.oxw().$implicit.services=e}),m.YNc(1,M,2,2,"div",22),m.qZA()}if(2&e){var n=m.oxw().$implicit;m.Q6J("dragula","services-bag")("dragulaModel",n.services),m.xp6(1),m.Q6J("ngForOf",n.services)}}function q(e,o){if(1&e){var t=m.EpF();m.TgZ(0,"div",25),m.NdJ("dragulaModelChange",function(e){return m.CHM(t),m.oxw().$implicit.services=e}),m._UZ(1,"app-drag-here-placeholder",26),m.qZA()}if(2&e){var n=m.oxw().$implicit;m.Q6J("dragula","services-bag")("dragulaModel",n.services)}}function J(e,o){if(1&e&&(m.TgZ(0,"div"),m.YNc(1,w,5,6,"div",14),m.TgZ(2,"div",15),m.YNc(3,T,2,3,"div",16),m.YNc(4,q,2,2,"div",17),m.qZA(),m.qZA()),2&e){var t=o.$implicit,n=m.oxw(2);m.xp6(1),m.Q6J("ngIf",!n.isMobile||t.services.length),m.xp6(2),m.Q6J("ngIf",t.services.length),m.xp6(1),m.Q6J("ngIf",!t.services.length&&!n.isMobile)}}function k(e,o){if(1&e){var t=m.EpF();m.TgZ(0,"div"),m.TgZ(1,"div",1),m.TgZ(2,"div",2),m.TgZ(3,"h3",3),m.TgZ(4,"span",4),m._uU(5),m.ALo(6,"translate"),m.qZA(),m.qZA(),m.qZA(),m.TgZ(7,"div",5),m.TgZ(8,"div",6),m.TgZ(9,"div",7),m.TgZ(10,"button",8),m._UZ(11,"i",9),m.qZA(),m.TgZ(12,"div",10),m.TgZ(13,"a",11),m.NdJ("click",function(){return m.CHM(t),m.oxw().addRoom()}),m._uU(14,"Add Room"),m.qZA(),m.TgZ(15,"a",11),m.NdJ("click",function(){m.CHM(t);var e=m.oxw();return e.hideHidden=!e.hideHidden}),m._uU(16,"Toggle Hidden"),m.qZA(),m.TgZ(17,"a",11),m.NdJ("click",function(){return m.CHM(t),m.oxw().toggleLayoutLock()}),m._uU(18,"Toggle Layout Lock"),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.TgZ(19,"div",12),m.NdJ("dragulaModelChange",function(e){return m.CHM(t),m.oxw().$accessories.rooms=e}),m.YNc(20,J,5,3,"div",13),m.qZA(),m.qZA()}if(2&e){var n=m.oxw();m.xp6(5),m.hij("Homebridge ",m.lcZ(6,7,"accessories.title_accessories"),""),m.xp6(8),m.Q6J("translate","accessories.button_add_room"),m.xp6(2),m.Q6J("translate","accessories.button_toggle_hidden"),m.xp6(2),m.Q6J("translate","accessories.button_toggle_layout_lock"),m.xp6(2),m.Q6J("dragula","rooms-bag")("dragulaModel",n.$accessories.rooms),m.xp6(1),m.Q6J("ngForOf",n.$accessories.rooms)}}function C(e,o){1&e&&(m.TgZ(0,"div"),m.TgZ(1,"div",18),m.TgZ(2,"div",27),m.TgZ(3,"h3",28),m._uU(4,"Homebridge Accessory Control Disabled"),m.qZA(),m.TgZ(5,"div"),m.TgZ(6,"p",29),m.ALo(7,"translate"),m._uU(8,"To control your accessories you must be running Homebridge in "),m.TgZ(9,"strong"),m._uU(10,"insecure"),m.qZA(),m._uU(11," mode."),m.qZA(),m.TgZ(12,"p"),m.TgZ(13,"span",30),m._uU(14,"Please see"),m.qZA(),m.TgZ(15,"a",31),m._uU(16," https://github.com/oznu/homebridge-config-ui-x/wiki/Enabling-Accessory-Control "),m.qZA(),m.TgZ(17,"span",30),m._uU(18,"for more information."),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.qZA()),2&e&&(m.xp6(3),m.Q6J("translate","accessories.title_accessory_control_disabled"),m.xp6(3),m.Q6J("innerHTML",m.lcZ(7,4,"accessories.message_must_use_insecure_mode"),m.oJD),m.xp6(7),m.Q6J("translate","accessories.message_please_see"),m.xp6(4),m.Q6J("translate","accessories.message_for_more_information"))}var Q,N,$=[{path:"",component:(Q=function(){function o(t,n,s,i,a,r,c){var l=this;e(this,o),this.dragulaService=t,this.$toastr=n,this.modalService=s,this.$settings=i,this.$md=a,this.translate=r,this.$accessories=c,this.isMobile=!1,this.hideHidden=!0,this.isMobile=this.$md.detect.mobile(),t.createGroup("rooms-bag",{moves:function(e,o,t){return!l.isMobile&&t.classList.contains("drag-handle")}}),t.createGroup("services-bag",{moves:function(e,o,t,n){return!l.isMobile&&!e.classList.contains("no-drag")}}),this.orderSubscription=t.drop().subscribe(function(){setTimeout(function(){l.$accessories.saveLayout()})}),window.localStorage.getItem("accessories-layout-locked")&&(this.isMobile=!0)}return t(o,[{key:"ngOnInit",value:function(){this.$accessories.start()}},{key:"addRoom",value:function(){var e=this;this.modalService.open(f,{size:"lg"}).result.then(function(o){o&&o.length&&(e.$accessories.rooms.find(function(e){return e.name===o})||(e.$accessories.rooms.push({name:o,services:[]}),e.isMobile&&e.toggleLayoutLock()))}).catch(function(){})}},{key:"toggleLayoutLock",value:function(){this.isMobile=!this.isMobile,this.isMobile?(window.localStorage.setItem("accessories-layout-locked","yes"),this.$toastr.success(this.translate.instant("accessories.layout_locked"),this.translate.instant("accessories.title_accessories"))):(window.localStorage.removeItem("accessories-layout-locked"),this.$toastr.success(this.translate.instant("accessories.layout_unlocked"),this.translate.instant("accessories.title_accessories")))}},{key:"ngOnDestroy",value:function(){this.$accessories.stop(),this.orderSubscription.unsubscribe(),this.dragulaService.destroy("rooms-bag"),this.dragulaService.destroy("services-bag")}}]),o}(),Q.\u0275fac=function(e){return new(e||Q)(m.Y36(l.pQ),m.Y36(h._W),m.Y36(c.FF),m.Y36(v.g),m.Y36(Z.L),m.Y36(r.sK),m.Y36(b.N))},Q.\u0275cmp=m.Xpm({type:Q,selectors:[["app-accessories"]],decls:2,vars:2,consts:[[4,"ngIf"],[1,"row","mb-3"],[1,"col-sm-6"],[1,"primary-text","m-0"],[1,"d-none","d-md-inline"],[1,"col-sm-6","text-right","d-none","d-sm-block"],["role","group","aria-label","Button group with nested dropdown",1,"btn-group"],["role","group",1,"btn-group"],["id","accessory-dropdown-menu","type","button","data-toggle","dropdown",1,"btn","btn-primary","dropdown-toggle"],[1,"fas","fa-cog"],["aria-labelledby","accessory-dropdown-menu",1,"dropdown-menu","dropdown-menu-right"],["href","javascript:void(0)",1,"dropdown-item",3,"translate","click"],[3,"dragula","dragulaModel","dragulaModelChange"],[4,"ngFor","ngForOf"],["class","row",4,"ngIf"],[1,"row","mb-4"],["class","col-md-12 d-flex flex-wrap noselect services-bag",3,"dragula","dragulaModel","dragulaModelChange",4,"ngIf"],["class","col-md-12 d-flex flex-wrap noselect",3,"dragula","dragulaModel","dragulaModelChange",4,"ngIf"],[1,"row"],[1,"col-md-12"],[1,"primary-text","drag-handle","room-title",3,"ngClass"],[1,"col-md-12","d-flex","flex-wrap","noselect","services-bag",3,"dragula","dragulaModel","dragulaModelChange"],["class","accessory-item accessory-tab",3,"ngSwitch",4,"ngFor","ngForOf"],[1,"accessory-item","accessory-tab",3,"ngSwitch"],[3,"service"],[1,"col-md-12","d-flex","flex-wrap","noselect",3,"dragula","dragulaModel","dragulaModelChange"],[1,"no-drag"],[1,"col-md-12","text-center"],[1,"primary-text",3,"translate"],[3,"innerHTML"],[3,"translate"],["target","_blank","rel","noopener noreferrer","href","https://github.com/oznu/homebridge-config-ui-x/wiki/Enabling-Accessory-Control"]],template:function(e,o){1&e&&(m.YNc(0,k,21,9,"div",0),m.YNc(1,C,19,6,"div",0)),2&e&&(m.Q6J("ngIf",o.$settings.env.enableAccessories),m.xp6(1),m.Q6J("ngIf",!o.$settings.env.enableAccessories))},directives:[i.O5,r.Pi,l.sW,i.sg,i.mk,i.RF,_.Z,y],pipes:[r.X$],styles:[".room-title[_ngcontent-%COMP%]{margin-left:10px}@media (max-width: 575px){.room-title[_ngcontent-%COMP%]{margin-left:7px}}.services-bag[_ngcontent-%COMP%]{min-height:170px}@media (max-width: 575px){.services-bag[_ngcontent-%COMP%]{min-height:0;min-height:auto}}.cursor-move[_ngcontent-%COMP%]{cursor:move}.gu-transit[_ngcontent-%COMP%]   .manage-accessory-button[_ngcontent-%COMP%]{display:none}"]}),Q)}],U=function(){var o=function o(){e(this,o)};return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=m.oAB({type:o}),o.\u0275inj=m.cJS({imports:[[g.Bz.forChild($)],g.Bz]}),o}(),O=((N=function o(){e(this,o)}).\u0275fac=function(e){return new(e||N)},N.\u0275mod=m.oAB({type:N}),N.\u0275inj=m.cJS({imports:[[i.ez,a.u5,c.IJ,l.qE,r.aw.forChild(),d.I,u.P,U]]}),N)}}])}();