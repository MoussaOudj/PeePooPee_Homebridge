(self.webpackChunkui=self.webpackChunkui||[]).push([[509],{67509:function(t,e,s){"use strict";s.r(e),s.d(e,{UsersModule:function(){return E}});var r=s(38583),a=s(95935),n=s(3679),i=s(71271),o=s(40294),l=s(63423),u=s(37716),c=s(49344),d=s(79274);const p=function(t){return{active:t}},m=function(t){return{"is-invalid":t}};let f=(()=>{class t{constructor(t,e,s,r){this.activeModal=t,this.toastr=e,this.translate=s,this.$api=r,this.page={title:"users.title_add_user",save:"users.button_add_new_user",password:"users.label_password"}}ngOnInit(){this.form=new n.cw({username:new n.NI("",[n.kI.required]),name:new n.NI("",[n.kI.required]),password:new n.NI("",[n.kI.compose([n.kI.required,n.kI.minLength(4)])]),passwordConfirm:new n.NI("",[n.kI.required]),admin:new n.NI(!0)},this.matchPassword)}matchPassword(t){if(t.get("password").value===t.get("passwordConfirm").value)return null;t.get("passwordConfirm").setErrors({matchPassword:!0})}onSubmit({value:t}){this.$api.post("/users",t).subscribe(t=>{this.activeModal.close(),this.toastr.success(this.translate.instant("users.toast_added_new_user"),this.translate.instant("toast.title_success"))},t=>{this.toastr.error(t.error.message||this.translate.instant("users.toast_failed_to_add_user"),this.translate.instant("toast.title_error"))})}}return t.\u0275fac=function(e){return new(e||t)(u.Y36(i.Kz),u.Y36(c._W),u.Y36(a.sK),u.Y36(d.s))},t.\u0275cmp=u.Xpm({type:t,selectors:[["app-users-add"]],decls:33,vars:28,consts:[[1,"modal-content"],[1,"modal-body"],["novalidate","",3,"formGroup","ngSubmit"],[1,"h4","text-center","mb-4",3,"innerText"],[1,"md-form"],[1,"fas","fa-user-shield","prefix","grey-text"],["formControlName","username","type","text","id","form-username","autocomplete","username","autocapitalize","none",1,"form-control","pl-0","pr-0"],["for","form-username",3,"ngClass","translate"],[1,"fas","fa-user","prefix","grey-text"],["formControlName","name","type","text","id","form-name","autocomplete","name",1,"form-control","pl-0","pr-0"],["for","form-name",3,"ngClass","translate"],[1,"row","pb-3"],[1,"col-md-6"],[1,"fas","fa-lock","prefix","grey-text"],["formControlName","password","type","password","autocomplete","new-password","id","form-pass",1,"form-control","pl-0","pr-0",3,"ngClass"],["for","form-pass",3,"innerText"],["formControlName","passwordConfirm","type","password","autocomplete","new-password","id","form-pass-confirm",1,"form-control","pl-0","pr-0",3,"ngClass"],["for","form-pass-confirm",3,"translate"],[1,"form-check","text-center","mb-4"],["formControlName","admin","type","checkbox","id","isAdmin",1,"form-check-input"],["for","isAdmin",1,"form-check-label",3,"translate"],[1,"text-center"],["type","submit",1,"btn","btn-primary",3,"disabled","innerText"]],template:function(t,e){1&t&&(u.TgZ(0,"div",0),u.TgZ(1,"div",1),u.TgZ(2,"form",2),u.NdJ("ngSubmit",function(){return e.onSubmit(e.form)}),u._UZ(3,"p",3),u.ALo(4,"translate"),u.TgZ(5,"div",4),u._UZ(6,"i",5),u._UZ(7,"input",6),u.TgZ(8,"label",7),u._uU(9,"Username"),u.qZA(),u.qZA(),u.TgZ(10,"div",4),u._UZ(11,"i",8),u._UZ(12,"input",9),u.TgZ(13,"label",10),u._uU(14,"Full Name"),u.qZA(),u.qZA(),u.TgZ(15,"div",11),u.TgZ(16,"div",12),u.TgZ(17,"div",4),u._UZ(18,"i",13),u._UZ(19,"input",14),u._UZ(20,"label",15),u.ALo(21,"translate"),u.qZA(),u.qZA(),u.TgZ(22,"div",12),u.TgZ(23,"div",4),u._UZ(24,"input",16),u._UZ(25,"label",17),u.qZA(),u.qZA(),u.qZA(),u.TgZ(26,"div",18),u._UZ(27,"input",19),u.TgZ(28,"label",20),u._uU(29,"Admin User?"),u.qZA(),u.qZA(),u.TgZ(30,"div",21),u._UZ(31,"button",22),u.ALo(32,"translate"),u.qZA(),u.qZA(),u.qZA(),u.qZA()),2&t&&(u.xp6(2),u.Q6J("formGroup",e.form),u.xp6(1),u.Q6J("innerText",u.lcZ(4,14,e.page.title)),u.xp6(4),u.uIk("disabled","users.title_edit_user"===e.page.title||null),u.xp6(1),u.Q6J("ngClass",u.VKq(20,p,"users.title_edit_user"===e.page.title))("translate","users.label_username"),u.xp6(5),u.Q6J("ngClass",u.VKq(22,p,"users.title_edit_user"===e.page.title))("translate","users.label_full_name"),u.xp6(6),u.Q6J("ngClass",u.VKq(24,m,e.form.controls.password.dirty&&e.form.controls.password.errors)),u.xp6(1),u.Q6J("innerText",u.lcZ(21,16,e.page.password)),u.xp6(4),u.Q6J("ngClass",u.VKq(26,m,e.form.controls.passwordConfirm.dirty&&e.form.controls.passwordConfirm.errors)),u.xp6(1),u.Q6J("translate","users.label_confirm_password"),u.xp6(3),u.Q6J("translate","users.label_admin_user"),u.xp6(3),u.Q6J("disabled",!e.form.valid)("innerText",u.lcZ(32,18,e.page.save)))},directives:[n._Y,n.JL,n.sg,n.Fj,n.JJ,n.u,r.mk,a.Pi,n.Wl],pipes:[a.X$],encapsulation:2}),t})();var Z=s(88951);const g=function(t){return{active:t}},_=function(t){return{"is-invalid":t}};let h=(()=>{class t{constructor(t,e,s,r,a){this.activeModal=t,this.toastr=e,this.translate=s,this.$api=r,this.$auth=a,this.page={title:"users.title_edit_user",save:"form.button_save",password:"users.label_new_password"},this.isCurrentUser=!1}ngOnInit(){this.isCurrentUser=this.$auth.user.username===this.user.username,this.form=new n.cw({username:new n.NI("",[n.kI.required]),name:new n.NI("",[n.kI.required]),password:new n.NI(""),passwordConfirm:new n.NI(""),admin:new n.NI(!0)},this.matchPassword),this.form.patchValue(this.user)}matchPassword(t){if(t.get("password").value===t.get("passwordConfirm").value)return null;t.get("passwordConfirm").setErrors({matchPassword:!0})}onSubmit({value:t}){this.$api.patch(`/users/${this.user.id}`,t).subscribe(e=>{this.activeModal.close(),this.toastr.success(this.translate.instant("users.toast_updated_user"),this.translate.instant("toast.title_success")),this.isCurrentUser&&t.username!==this.$auth.user.username&&this.$auth.logout()},t=>{this.toastr.error(t.error.message||this.translate.instant("users.toast_failed_to_add_user"),this.translate.instant("toast.title_error"))})}}return t.\u0275fac=function(e){return new(e||t)(u.Y36(i.Kz),u.Y36(c._W),u.Y36(a.sK),u.Y36(d.s),u.Y36(Z.e))},t.\u0275cmp=u.Xpm({type:t,selectors:[["app-users-edit"]],inputs:{user:"user"},decls:33,vars:27,consts:[[1,"modal-content"],[1,"modal-body"],["novalidate","",3,"formGroup","ngSubmit"],[1,"h4","text-center","mb-4",3,"innerText"],[1,"md-form"],[1,"fas","fa-user-shield","prefix","grey-text"],["formControlName","username","type","text","id","form-username","autocomplete","off","autocapitalize","none",1,"form-control","pl-0","pr-0"],["for","form-username",3,"ngClass","translate"],[1,"fas","fa-user","prefix","grey-text"],["formControlName","name","type","text","id","form-name","autocomplete","name",1,"form-control","pl-0","pr-0"],["for","form-name",3,"ngClass","translate"],[1,"row","pb-3"],[1,"col-md-6"],[1,"fas","fa-lock","prefix","grey-text"],["formControlName","password","type","password","autocomplete","new-password","id","form-pass",1,"form-control","pl-0","pr-0",3,"ngClass"],["for","form-pass",3,"innerText"],["formControlName","passwordConfirm","type","password","autocomplete","new-password","id","form-pass-confirm",1,"form-control","pl-0","pr-0",3,"ngClass"],["for","form-pass-confirm",3,"translate"],[1,"form-check","text-center","mb-4"],["formControlName","admin","type","checkbox","id","isAdmin",1,"form-check-input"],["for","isAdmin",1,"form-check-label",3,"translate"],[1,"text-center"],["type","submit",1,"btn","btn-primary",3,"disabled","innerText"]],template:function(t,e){1&t&&(u.TgZ(0,"div",0),u.TgZ(1,"div",1),u.TgZ(2,"form",2),u.NdJ("ngSubmit",function(){return e.onSubmit(e.form)}),u._UZ(3,"p",3),u.ALo(4,"translate"),u.TgZ(5,"div",4),u._UZ(6,"i",5),u._UZ(7,"input",6),u.TgZ(8,"label",7),u._uU(9,"Username"),u.qZA(),u.qZA(),u.TgZ(10,"div",4),u._UZ(11,"i",8),u._UZ(12,"input",9),u.TgZ(13,"label",10),u._uU(14,"Full Name"),u.qZA(),u.qZA(),u.TgZ(15,"div",11),u.TgZ(16,"div",12),u.TgZ(17,"div",4),u._UZ(18,"i",13),u._UZ(19,"input",14),u._UZ(20,"label",15),u.ALo(21,"translate"),u.qZA(),u.qZA(),u.TgZ(22,"div",12),u.TgZ(23,"div",4),u._UZ(24,"input",16),u._UZ(25,"label",17),u.qZA(),u.qZA(),u.qZA(),u.TgZ(26,"div",18),u._UZ(27,"input",19),u.TgZ(28,"label",20),u._uU(29,"Admin User?"),u.qZA(),u.qZA(),u.TgZ(30,"div",21),u._UZ(31,"button",22),u.ALo(32,"translate"),u.qZA(),u.qZA(),u.qZA(),u.qZA()),2&t&&(u.xp6(2),u.Q6J("formGroup",e.form),u.xp6(1),u.Q6J("innerText",u.lcZ(4,13,e.page.title)),u.xp6(5),u.Q6J("ngClass",u.VKq(19,g,"users.title_edit_user"===e.page.title))("translate","users.label_username"),u.xp6(5),u.Q6J("ngClass",u.VKq(21,g,"users.title_edit_user"===e.page.title))("translate","users.label_full_name"),u.xp6(6),u.Q6J("ngClass",u.VKq(23,_,e.form.controls.password.dirty&&e.form.controls.password.errors)),u.xp6(1),u.Q6J("innerText",u.lcZ(21,15,e.page.password)),u.xp6(4),u.Q6J("ngClass",u.VKq(25,_,e.form.controls.passwordConfirm.dirty&&e.form.controls.passwordConfirm.errors)),u.xp6(1),u.Q6J("translate","users.label_confirm_password"),u.xp6(3),u.Q6J("translate","users.label_admin_user"),u.xp6(3),u.Q6J("disabled",!e.form.valid)("innerText",u.lcZ(32,17,e.page.save)))},directives:[n._Y,n.JL,n.sg,n.Fj,n.JJ,n.u,r.mk,a.Pi,n.Wl],pipes:[a.X$],encapsulation:2}),t})();var b=s(48873),v=s(87575);const w=["qrcode"],x=function(t){return{timeDiffError:t}};function A(t,e){if(1&t&&(u.TgZ(0,"div",15),u.TgZ(1,"h3"),u._uU(2),u.ALo(3,"translate"),u.qZA(),u._UZ(4,"p",16),u.qZA()),2&t){const t=u.oxw();u.xp6(2),u.Oqu(u.lcZ(3,3,"users.setup_2fa_cannot_setup_2fa")),u.xp6(2),u.Q6J("translate","users.setup_2fa_server_time_out")("translateParams",u.VKq(5,x,t.timeDiffError))}}function q(t,e){1&t&&(u.TgZ(0,"div"),u.TgZ(1,"p"),u._uU(2),u.ALo(3,"translate"),u.qZA(),u.qZA()),2&t&&(u.xp6(2),u.Oqu(u.lcZ(3,1,"users.setup_2fa_scan_qr_code")))}function T(t,e){if(1&t&&(u.TgZ(0,"div",17),u.TgZ(1,"p"),u._uU(2),u.ALo(3,"translate"),u.qZA(),u.TgZ(4,"div",18),u._UZ(5,"input",19),u.qZA(),u.qZA()),2&t){const t=u.oxw();u.xp6(2),u.Oqu(u.lcZ(3,2,"users.setup_2fa_enter_code")),u.xp6(3),u.Q6J("formControl",t.formGroup.controls.code)}}function U(t,e){if(1&t){const t=u.EpF();u.TgZ(0,"button",20),u.NdJ("click",function(){return u.CHM(t),u.oxw().enable2fa()}),u._uU(1,"Enable 2FA"),u.qZA()}if(2&t){const t=u.oxw();u.Q6J("disabled",t.formGroup.invalid)("translate","users.setup_2fa_enable")}}let J=(()=>{class t{constructor(t,e,s,r){this.activeModal=t,this.toastr=e,this.translate=s,this.$api=r,this.timeDiffError=null}ngOnInit(){this.formGroup=new n.cw({code:new n.NI("",[n.kI.required,n.kI.minLength(6),n.kI.maxLength(6)])}),this.$api.post("/users/otp/setup",{}).subscribe(t=>{this.checkTimeDiff(t.timestamp),this.timeDiffError||(this.otpString=t.otpauth)},t=>{this.activeModal.dismiss(),this.toastr.error(t.error.message||"An error occured while attempting to setup 2FA",this.translate.instant("toast.title_error"))})}checkTimeDiff(t){const e=b(t).diff(new Date,"millisecond");this.timeDiffError=e<-5e3||e>5e3?e:null}enable2fa(){this.$api.post("/users/otp/activate",this.formGroup.value).subscribe(t=>{this.toastr.success(this.translate.instant("users.setup_2fa_enabled_success"),this.translate.instant("toast.title_success")),this.activeModal.close()},t=>{this.toastr.error(t.error.message||"An error occured",this.translate.instant("toast.title_error"))})}}return t.\u0275fac=function(e){return new(e||t)(u.Y36(i.Kz),u.Y36(c._W),u.Y36(a.sK),u.Y36(d.s))},t.\u0275cmp=u.Xpm({type:t,selectors:[["app-users-setup2fa"]],viewQuery:function(t,e){if(1&t&&u.Gf(w,7),2&t){let t;u.iGM(t=u.CRH())&&(e.qrcodeElement=t.first)}},inputs:{user:"user"},decls:21,vars:13,consts:[[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],["class","text-center",4,"ngIf"],["type","info",3,"dismissible"],[4,"ngIf"],[1,"text-center","w-100","d-flex","justify-content-center"],[3,"data"],["class","mt-4",4,"ngIf"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn","btn-elegant",3,"translate","click"],["type","button","class","btn btn-primary","data-dismiss","modal",3,"disabled","translate","click",4,"ngIf"],[1,"text-center"],[3,"translate","translateParams"],[1,"mt-4"],[1,"form-group"],["type","text","placeholder","eg. 123456","autocomplete","one-time-code","autocapitalize","none","inputmode","numeric","pattern","[0-9]*",1,"form-control",3,"formControl"],["type","button","data-dismiss","modal",1,"btn","btn-primary",3,"disabled","translate","click"]],template:function(t,e){1&t&&(u.TgZ(0,"div",0),u.TgZ(1,"div",1),u.TgZ(2,"h5",2),u._uU(3),u.ALo(4,"translate"),u.qZA(),u.TgZ(5,"button",3),u.NdJ("click",function(){return e.activeModal.dismiss("Cross click")}),u.TgZ(6,"span",4),u._uU(7,"\xd7"),u.qZA(),u.qZA(),u.qZA(),u.TgZ(8,"div",5),u.YNc(9,A,5,7,"div",6),u.TgZ(10,"ngb-alert",7),u._uU(11),u.ALo(12,"translate"),u.qZA(),u.YNc(13,q,4,3,"div",8),u.TgZ(14,"div",9),u._UZ(15,"app-qrcode",10),u.qZA(),u.YNc(16,T,6,4,"div",11),u.qZA(),u.TgZ(17,"div",12),u.TgZ(18,"button",13),u.NdJ("click",function(){return e.activeModal.dismiss("Cross click")}),u._uU(19,"Cancel"),u.qZA(),u.YNc(20,U,2,2,"button",14),u.qZA(),u.qZA()),2&t&&(u.xp6(3),u.Oqu(u.lcZ(4,9,"users.setup_2fa")),u.xp6(6),u.Q6J("ngIf",e.timeDiffError),u.xp6(1),u.Q6J("dismissible",!1),u.xp6(1),u.hij(" ",u.lcZ(12,11,"users.setup_2fa_warning")," "),u.xp6(2),u.Q6J("ngIf",!e.timeDiffError),u.xp6(2),u.Q6J("data",e.otpString),u.xp6(1),u.Q6J("ngIf",!e.timeDiffError),u.xp6(2),u.Q6J("translate","form.button_cancel"),u.xp6(2),u.Q6J("ngIf",!e.timeDiffError))},directives:[r.O5,i.xm,v.z,a.Pi,n.Fj,n.c5,n.JJ,n.oH],pipes:[a.X$],styles:[""]}),t})();function C(t,e){1&t&&(u.TgZ(0,"p",12),u.TgZ(1,"small",13),u._uU(2,"Invalid Username and Password"),u.qZA(),u.qZA()),2&t&&(u.xp6(1),u.Q6J("translate","login.message_invalid_username_or_password"))}let y=(()=>{class t{constructor(t,e,s,r){this.activeModal=t,this.toastr=e,this.translate=s,this.$api=r,this.invalidCredentials=!1}ngOnInit(){this.formGroup=new n.cw({password:new n.NI("",[n.kI.required])})}disable2fa(){this.invalidCredentials=!1,this.$api.post("/users/otp/deactivate",this.formGroup.value).subscribe(t=>{this.activeModal.close(),this.toastr.success(this.translate.instant("users.setup_2fa_disable_success"),this.translate.instant("toast.title_success"))},t=>{this.formGroup.setValue({password:""}),this.invalidCredentials=!0})}}return t.\u0275fac=function(e){return new(e||t)(u.Y36(i.Kz),u.Y36(c._W),u.Y36(a.sK),u.Y36(d.s))},t.\u0275cmp=u.Xpm({type:t,selectors:[["app-users-disable2fa"]],decls:23,vars:18,consts:[[1,"modal-content",2,"min-height","300px"],[1,"modal-header"],[1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"form-group"],["type","password","autocomplete","current-password",1,"form-control",3,"formControl","placeholder"],["class","red-text",4,"ngIf"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn","btn-elegant","mr-auto",3,"click"],["type","button","data-dismiss","modal",1,"btn","btn-danger",3,"disabled","click"],[1,"red-text"],[3,"translate"]],template:function(t,e){1&t&&(u.TgZ(0,"div",0),u.TgZ(1,"div",1),u.TgZ(2,"h5",2),u._uU(3),u.ALo(4,"translate"),u.qZA(),u.TgZ(5,"button",3),u.NdJ("click",function(){return e.activeModal.dismiss("Dismiss")}),u.TgZ(6,"span",4),u._uU(7,"\xd7"),u.qZA(),u.qZA(),u.qZA(),u.TgZ(8,"div",5),u.TgZ(9,"p"),u._uU(10),u.ALo(11,"translate"),u.qZA(),u.TgZ(12,"div",6),u._UZ(13,"input",7),u.ALo(14,"translate"),u.qZA(),u.YNc(15,C,3,1,"p",8),u.qZA(),u.TgZ(16,"div",9),u.TgZ(17,"button",10),u.NdJ("click",function(){return e.activeModal.dismiss("Dismiss")}),u._uU(18),u.ALo(19,"translate"),u.qZA(),u.TgZ(20,"button",11),u.NdJ("click",function(){return e.disable2fa()}),u._uU(21),u.ALo(22,"translate"),u.qZA(),u.qZA(),u.qZA()),2&t&&(u.xp6(3),u.Oqu(u.lcZ(4,8,"users.setup_2fa_disable")),u.xp6(7),u.Oqu(u.lcZ(11,10,"users.setup_2fa_disable_enter_current_password")),u.xp6(3),u.Q6J("formControl",e.formGroup.controls.password)("placeholder",u.lcZ(14,12,"users.label_password")),u.xp6(2),u.Q6J("ngIf",e.invalidCredentials),u.xp6(3),u.hij(" ",u.lcZ(19,14,"form.button_cancel")," "),u.xp6(2),u.Q6J("disabled",e.formGroup.invalid),u.xp6(1),u.hij(" ",u.lcZ(22,16,"users.setup_2fa_disable")," "))},directives:[n.Fj,n.JJ,n.oH,r.O5,a.Pi],pipes:[a.X$],styles:[""]}),t})();function k(t,e){if(1&t){const t=u.EpF();u.TgZ(0,"button",15),u.NdJ("click",function(){u.CHM(t);const e=u.oxw().$implicit;return u.oxw().deleteUser(e.id)}),u._uU(1," Delete "),u.qZA()}2&t&&u.Q6J("translate","form.button_delete")}function I(t,e){if(1&t){const t=u.EpF();u.TgZ(0,"button",14),u.NdJ("click",function(){u.CHM(t);const e=u.oxw().$implicit;return u.oxw().setup2fa(e)}),u._uU(1," Setup 2FA "),u.qZA()}2&t&&u.Q6J("translate","users.setup_2fa")}function N(t,e){if(1&t){const t=u.EpF();u.TgZ(0,"button",14),u.NdJ("click",function(){u.CHM(t);const e=u.oxw().$implicit;return u.oxw().disable2fa(e)}),u._uU(1," Disable 2FA "),u.qZA()}2&t&&u.Q6J("translate","users.setup_2fa_disable")}function Q(t,e){if(1&t){const t=u.EpF();u.TgZ(0,"div",8),u.TgZ(1,"div",9),u.TgZ(2,"div",10),u._UZ(3,"h4",11),u.YNc(4,k,2,1,"button",12),u.YNc(5,I,2,1,"button",13),u.YNc(6,N,2,1,"button",13),u.TgZ(7,"button",14),u.NdJ("click",function(){const e=u.CHM(t).$implicit;return u.oxw().openEditUser(e)}),u._uU(8," Edit "),u.qZA(),u.qZA(),u.qZA(),u.qZA()}if(2&t){const t=e.$implicit,s=u.oxw();u.xp6(3),u.Q6J("innerText",t.name),u.xp6(1),u.Q6J("ngIf",s.$auth.user.username!==t.username),u.xp6(1),u.Q6J("ngIf",s.$auth.user.username===t.username&&!t.otpActive),u.xp6(1),u.Q6J("ngIf",s.$auth.user.username===t.username&&t.otpActive),u.xp6(1),u.Q6J("translate","form.button_edit")}}let $=(()=>{class t{constructor(t,e,s,r,a,n){this.toastr=t,this.translate=e,this.modalService=s,this.$api=r,this.$route=a,this.$auth=n}ngOnInit(){this.$route.data.subscribe(t=>{this.homebridgeUsers=t.homebridgeUsers})}reloadUsers(){return this.$api.get("/users").subscribe(t=>{this.homebridgeUsers=t})}openAddNewUser(){this.modalService.open(f,{size:"lg"}).result.finally(()=>{this.reloadUsers()})}openEditUser(t){const e=this.modalService.open(h,{size:"lg"});e.componentInstance.user=t,e.result.finally(()=>{this.reloadUsers()})}deleteUser(t){this.$api.delete(`/users/${t}`).subscribe(t=>{this.toastr.success(this.translate.instant("users.toast_user_deleted"),this.translate.instant("toast.title_success")),this.reloadUsers()},t=>{this.toastr.error(t.error.message||this.translate.instant("users.toast_failed_to_delete_user"),this.translate.instant("toast.title_error"))})}setup2fa(t){const e=this.modalService.open(J,{size:"lg",backdrop:"static"});e.componentInstance.user=t,e.result.finally(()=>{this.reloadUsers()})}disable2fa(t){const e=this.modalService.open(y,{backdrop:"static"});e.componentInstance.user=t,e.result.finally(()=>{this.reloadUsers()})}}return t.\u0275fac=function(e){return new(e||t)(u.Y36(c._W),u.Y36(a.sK),u.Y36(i.FF),u.Y36(d.s),u.Y36(l.gz),u.Y36(Z.e))},t.\u0275cmp=u.Xpm({type:t,selectors:[["app-users"]],decls:12,vars:5,consts:[[1,"row","mb-3"],[1,"col-sm-9","d-none","d-sm-block"],[1,"primary-text","m-0"],[1,"d-none","d-md-inline"],[1,"col-sm-3","text-right"],[1,"btn","btn-primary","waves-effect","m-0",3,"translate","click"],[1,"row"],["class","col-md-6 mb-4",4,"ngFor","ngForOf"],[1,"col-md-6","mb-4"],[1,"card","card-body"],[1,"d-flex","flex-row","align-items-center"],[1,"mr-auto","mt-0","mb-0",3,"innerText"],["class","btn btn-elegant btn-sml mt-0 mb-0",3,"translate","click",4,"ngIf"],["class","btn btn-primary mt-0 mb-0",3,"translate","click",4,"ngIf"],[1,"btn","btn-primary","mt-0","mb-0",3,"translate","click"],[1,"btn","btn-elegant","btn-sml","mt-0","mb-0",3,"translate","click"]],template:function(t,e){1&t&&(u.TgZ(0,"div",0),u.TgZ(1,"div",1),u.TgZ(2,"h3",2),u.TgZ(3,"span",3),u._uU(4,"Homebridge Config UI"),u.qZA(),u._uU(5),u.ALo(6,"translate"),u.qZA(),u.qZA(),u.TgZ(7,"div",4),u.TgZ(8,"button",5),u.NdJ("click",function(){return e.openAddNewUser()}),u._uU(9,"Add User"),u.qZA(),u.qZA(),u.qZA(),u.TgZ(10,"div",6),u.YNc(11,Q,9,5,"div",7),u.qZA()),2&t&&(u.xp6(5),u.hij(" ",u.lcZ(6,3,"users.title_users"),""),u.xp6(3),u.Q6J("translate","users.button_add_user"),u.xp6(3),u.Q6J("ngForOf",e.homebridgeUsers))},directives:[a.Pi,r.sg,r.O5],pipes:[a.X$],encapsulation:2}),t})(),Y=(()=>{class t{constructor(t,e,s){this.$api=t,this.$toastr=e,this.$router=s}resolve(t,e){return this.$api.get("/users").toPromise().catch(t=>{this.$toastr.error(t.message,"Failed to Load Users"),this.$router.navigate(["/"])})}}return t.\u0275fac=function(e){return new(e||t)(u.LFG(d.s),u.LFG(c._W),u.LFG(l.F0))},t.\u0275prov=u.Yz7({token:t,factory:t.\u0275fac}),t})();const L=[{path:"",component:$,resolve:{homebridgeUsers:Y}}];let F=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=u.oAB({type:t}),t.\u0275inj=u.cJS({imports:[[l.Bz.forChild(L)],l.Bz]}),t})(),E=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=u.oAB({type:t}),t.\u0275inj=u.cJS({providers:[Y],imports:[[r.ez,n.u5,n.UX,a.aw.forChild(),i.IJ,o.I,F]]}),t})()}}]);